<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Socioscope</title>
    <link rel="icon" type="image/x-icon" href="static/images/telescope.png">

    <!-- Load overpas-layer plugin -->
    <link rel="stylesheet" href="./plugins/overpass-layer/node_modules/leaflet/dist/leaflet.css" />
    <link rel="stylesheet" href="./plugins/overpass-layer/demo/demo.css" />
    <script src="./plugins/overpass-layer/node_modules/leaflet/dist/leaflet.js"></script>
    <script src="./plugins/overpass-layer/node_modules/leaflet-polylineoffset/leaflet.polylineoffset.js"></script>
    <script src="./plugins/overpass-layer/node_modules/leaflet-polylinedecorator/dist/leaflet.polylineDecorator.js"></script>
    <script src="./plugins/overpass-layer/dist/overpass-layer.js"></script>

    <!-- Load leaflet -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

    <!-- Load markercluster plugin-->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css" integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ==" crossorigin="" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.3.0/dist/MarkerCluster.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.3.0/dist/MarkerCluster.Default.css" />

    <script src="https://cdnjs.cloudflare.com/ajax/libs/spin.js/2.3.2/spin.min.js"></script>

    <script src="https://unpkg.com/leaflet.markercluster@1.3.0/dist/leaflet.markercluster.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.24.0/axios.min.js"></script>

    <!-- Load Esri Leaflet from CDN -->
    <script src="https://unpkg.com/esri-leaflet@3.0.10/dist/esri-leaflet.js"></script>
    <!-- Load Esri Leaflet Geocoder from CDN -->
    <link rel="stylesheet" href="https://unpkg.com/esri-leaflet-geocoder@3.1.4/dist/esri-leaflet-geocoder.css" crossorigin="" />
    <script src="https://unpkg.com/esri-leaflet-geocoder@3.1.4/dist/esri-leaflet-geocoder.js" crossorigin=""></script>

    <!-- Load the leaflet legend plugin -->
    <link rel="stylesheet" href="./plugins/leaflet-legend/src/leaflet.legend.css" crossorigin="" />
    <script src="./plugins/leaflet-legend/src/leaflet.legend.js" crossorigin=""></script>

    <!-- Load osmtogeojson plugin -->
    <script src="./plugins/osmtogeojson/osmtogeojson.js"></script>

    <!-- Load easyprint plugin -->
    <script src="./plugins/leaflet-easyprint/dist/bundle.js"></script>

    <!-- load chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Import style -->
    <link rel="stylesheet" href="./static/css/style.css">

</head>

<body>
    <div id="map"></div>

    <div class="side">
        <div id="defaultpanel">
            <div class="about">
                <h2><img src="static/images/telescope.png" alt="/" width="30">Subway Socioscope</h2>
                <h3>About</h3>
                <p class="intro">
                    Subway Socioscope provides an interactive visualization of Social Infrastructure Points of Interest (SIPOI) and key social and built environment characteristics within a 1-kilometer radius of subway stations globally. This tool aims to highlight the variations in social infrastructure around subway stations and to explore how car-centric infrastructure adversely affects the availability of SIPOI. <br>
                    Read more about project <a href="https://www.xiaofanliang.com/project/sipoi/"> Does Social Infrastructure Exist Near Subway Stations?</a>

                    <!-- This is a web map using <a href="https://www.openstreetmap.org/">OpenStreetMap</a> data to show the
                    distribution of social infrastructure points of interest around subway stations worldwide.
                    The goal is to further explore and disseminate insights from this project:
                    <a href="https://www.xiaofanliang.com/project/sipoi/"> Does Social Infrastructure Exist Near Subway Stations?</a> -->
                </p>
            </div>
            <div class="guide">
                <h3>User Guide</h3>
                <p class="intro">
                    Use <img src="img/layers.png" alt="/" width="25"> to select basemap and turn on/off layers;
                </p>
                <p class="intro">
                    Use <img src="plugins/esri-leaflet-geocoder/src/img/search.png " alt="/" width="30" style="margin: 0;"> and <img src="static/images/target.svg" alt="/" width="22"> to search any place and nearby POIs
                </p>
                <p class="intro">Zoom in or click on cluster to view stations details</p>
                <p class="intro">
                    Use <img src="img/printIcon.png" alt="/" width="20" style="opacity: 0.8;">to save the map as a pdf file
                </p>
                <p class="intro">
                    Click on <img src="static/images/subway.svg" alt="/" width="18">to get Social Infrastructure Point of Interest (SIPOI) near the selected station
                </p>

            </div>



            <!-- <div id="test">
                <canvas id="myChart"></canvas>
            </div> -->
        </div>

        <div id="statspanel">
            <div id="metroInfo"></div>

            <div class="poiInfo">
                <h3> Social Infrastructure Point of Interest (SIPOI) Within 1KM</h3>
                <!-- <div id="poiStats">Not available</div> -->
                <!-- <div id="poiChart">
                    POI information not available
                </div> -->
                <div id="poiSum"></div>
                <canvas id="poiChart"></canvas>
                <div id="poiChartTitle"></div>

                <div class="download">
                    <button id="downloadCSV">Loading...</button>
                    <button id="downloadGeoJson">Loading...</button>
                </div>

            </div>

            <div class="statsInfo">
                <h3>Social and Built Environment Within 1KM</h3>
                <div id="popInfo"><p>Population Information Not Available</p></div>
                <div id="distToCenter"><p>Distance to City Center Information Not Available</p></div>
                <div id="buildingAreaInfo"><p>Building Area Information Not Available</p></div>

                <div id="parkingAreaInfo"><p>Parking Area Information Not Available</p></div>
                <div id="highwayInfo"><p>Road Length Information Not Available</p></div>
                <canvas id="roadLenChart"></canvas>
                <!-- <div id="highway-chart">
                    <div class="bar" id="moterBar"></div>
                    <div class="bar" id="pedestrianBar"></div>
                    <div class="bar" id="othersBar"></div>
                </div>
                <div id="barLegend"><p>Road Length Information By Type</p>;</div> -->
            </div>

            <div class="clearContainer">
                <button id="clearPOI">Clear Current SIPOI</button>
            </div>

        </div> <!-- statspanel -->

    </div>
    <script>
        var map = L.map('map').setView([0, 0], 2);
    </script>
    <script type="module" src="src/base.js"></script>
    <!-- <script type="module" src="src/test.js"></script> -->

    <footer>
        <div class="footerContent">
            <p>
            &copy;Created By Qifan Wu ,<br> (Taubman College of Architecture and Urban Planning, University of Michigan)
            </p
        </div>
    </footer>
</body>
</html>
